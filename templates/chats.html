<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chats</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" defer></script>
    <script src="https://cdn.socket.io/4.0.0/socket.io.min.js" defer></script>
    <script src="/static/js/chats.js" defer></script>
</head>

<body>
    <!--  <div id="menu-overlay"></div>   -->
    <div class="container">
        <div class="slide-menu">
            <div class="slide-menu-header">
                <img src="profile-picture.jpg" alt="Profile Picture" id="profile-picture">
                <span id="username">{{ username }}</span>
            </div>
            <div class="slide-menu-body">
                <button id="add-contact-slide">Add Contact</button>
                <button id="create-group-btn">Create Group</button>
                <button id="settings-btn">Settings</button>
            </div>
            <div class="slide-menu-footer">
                <button id="logout-slide-btn">Log Out</button>
            </div>
        </div>
        <!-- Sidebar Section -->
        <div class="sidebar">
            <div class="bar">
                <button id="toggle-slide-menu">â˜°</button>
                <button id="add-contact-btn">Add Contact</button>
            </div>
            <div id="contact-list">
                <!-- Contacts will be dynamically loaded here -->
            </div>
        </div>
        <!-- Chat Section -->
        <div class="chat-container">
            <div id="chat-header">
                <span id="contact-name">Select a contact to chat</span>
                <button id="logout-btn">Logout</button>
            </div>
            <div id="chat-messages">
                <!-- Chat messages will be displayed here -->
            </div>
            <div id="chat-input">
                <textarea id="message-input" placeholder="Type a message..." rows="1"></textarea>
                <button id="send-btn">Send</button>
            </div>
        </div>
    </div>

    <div id="add-contact-popup" class="popup">
        <h3>Add Contact</h3>
        <input type="text" id="contact-username" placeholder="Enter username of contact" />
        <button id="confirm-add-contact-btn">Add Contact</button>
        <button id="cancel-add-contact-btn">Cancel</button>
    </div>

    <div id="settings-overlay" class="overlay">
        <div class="overlay-content">
            <h2>Settings</h2>
            <form id="profile-picture-form">
                <label for="profile-picture-input">Upload Profile Picture (Max 1MB):</label>
                <input type="file" id="profile-picture-input" accept="image/*">
                <button type="submit">Upload</button>
            </form>
            <button id="close-settings-btn">Close</button>
        </div>
    </div>
</body>
<script>
    const loggedInUserId = "{{ user_uuid }}";
    const loggedInUsername = "{{ username }}";
</script>

</html>